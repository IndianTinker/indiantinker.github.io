<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js">
</script>

  <meta name="google-site-verification" content="jnyuLnp8Zt_h8SKLdZzI_qRZ1uOO24uww8-ucfKDbJM" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="twitter:site" content="@rohit7gupta"/>
<meta name="twitter:creator" content="@rohit7gupta"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta content="Rohit Gupta" property="og:site_name"/>


  <meta name="twitter:description" content="Regular Hacks, exploits, projects and tutorials by Rohit Gupta (IndianTinker)"/>


  <meta  property="og:title" content="Home"/>
  <meta name="twitter:title" content="Home"/>
  


  <meta property="og:type" content="article"/>
  <meta property="article:author" content="https://www.facebook.com/rohit7gupta" />


  <meta property="og:url" content="http://localhost:4000/page23/" />



  <meta content="https://farm4.staticflickr.com/3837/15112162250_f1720783c9.jpg" property="og:image"/>
  <meta name="twitter:image:src" content="https://farm4.staticflickr.com/3837/15112162250_f1720783c9.jpg"/>







  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Rohit Gupta &middot; Doer, Designer and Researcher
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
<link href="https://fonts.googleapis.com/css?family=Nunito|Roboto+Mono" rel="stylesheet"> 

  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

<!--Google Analytics-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55965373-1', 'auto');
  ga('send', 'pageview');

</script>
</head>


  <body>


    <div class="sidebar">
 </b>
  <div class="container sidebar-sticky">
<div align="center">
    <img src="/bitmoji.png" height="100px" width="100px" style="clip-path: circle(60px at center)">
</div>
    <div class="sidebar-about">
    <h1 color="#303F9F">
        <a href="/">
          Rohit Gupta
        </a>
      </h1>
      <p class="lead">A blog by <a href="https://twitter.com/rohit7gupta">@rohit7gupta</a></p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/archive/">Archive</a>
          
        
      
        
      
        
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/projects/">Projects</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/publications/">Research</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/travels/">Writings</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

   <!--
    <a class="twitter-follow-button"
  href="https://twitter.com/rohit7gupta"
  data-show-count="false"
  data-lang="en">
Follow @rohit7gupta
</a>
<script type="text/javascript">
window.twttr = (function (d, s, id) {
  var t, js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src= "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);
  return window.twttr || (t = { _e: [], ready: function (f) { t._e.push(f) } });
}(document, "script", "twitter-wjs"));
</script> -->
<br>

<!-- <p style="font-size:1.75rem ;color:#eceff1;">
<a class="list-group-item" href="https://www.twitter.com/rohit7gupta"><i class="fa fa-twitter"></i></a>
<a class="list-group-item" href="https://www.flickr.com/photos/94411929@N06/"><i class="fa fa-flickr"></i></a>
<a class="list-group-item" href="https://www.github.com/indiantinker"><i class="fa fa-github"></i></a>
</p>       

</span>-->
    </nav>
<p style="font-size:0.618rem ;color:black;">Made with <i class="fa fa-heart"></i> in India</a>
</p>

  </div>
</div>


    <div class="content container">
    <div class="post">
  
    </div>
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/09/24/CNCsnMe1/">
        CNCs & Me 1 - Easy Peasy Stepper System Tester
      </a>
    </h1>

    <span class="post-date">24 Sep 2015</span>

    <p><em>This post is a part of a series i plan to write periodically to document my exploits with CNC machines and other stuff i have built! This post is about a stepper system tester i built a while back.</em></p>

<p>Stepper motors are quite widely used for CNCs/3D Printers or other Electromechanical hacks like the polar plotter etc. ! There is as always a constant need to run the motor to check whether its aligned properly or not? Does the flex coupling has any issues? Is the driver dead or alive and the best one- whether the current setting is fine to generate enough torque to hold or move the lead screw/Belt.</p>
<p>Pestered by the same above questions i wanted to build my own driver/motor tester overnight and it 'must' be built ACAP (As cheap as possible) :D ! I stumbled open <a href="https://labitat.dk/wiki/Easy_Stepper_Motor_Controller">this</a> awesome project that i saw on Hack-A-Day.</p>
<p>It uses an ATiny AVR microcontroller which I did'nt have and the least capable one i had was the MSP430G2230 which came in a SOIC pkg a bit difficult to go on the perfboard and my laziness propelled me away from etching a board for accommodating the same (I now feel the need though). I thought of building a microcontroller-less one as most modern stepper drivers like the ones from <a href="http://www.pololu.com/category/120/stepper-motor-drivers">Pololu</a>  need just two signal i.e STEP and DIR.</p>
<p>A pulse on step pin will initiate a step to the internal indexer that handles what coil has to be energized based on the sequence and micro-stepping settings, while the DIR is a level signal whose level decides whether the internal indexer of the driver counts up or down!</p>
<p>So, only two inputs i.e Pulsed input for STEP and level input for DIR. This can be achieved using the 555 timer in the <b>astable</b> mode. The Output of 555 i.e pin 3 will go into the step pin and the DIR pin is pulled up using a resistor and it is also connected to ground via switch.</p>
<p>This gets the job done! We can also have a POT to vary the frequency since some motors don't respond to faster pulses due to rotor inertia.The driver i am using is based on DRV8825 from TI. It is slightly wider than the polulu one. (You might call me a TI fan boy).
I designed it myself based on reference designs by TI and had the PCBs made by SeeedStudio's Fusion PCB Service. It took about 30 odd days to reach. The driver is two layer in-contrast the Pololu ones are 4 layer. I had to widen the PCB to provide enough dissipating area for the inbuilt heatsink on the the HTSSOP pkg of the DRV8825. Also the SMD resistor cousins of those lower value resistors were not available here in Delhi, so had to go with through hole ones. Ditto for the POT ! </p>

<p>With the Tester designing almost final , I grabbed a piece of perfboard since, i didnt have the time to etch the board.</p>
<p>The circuit is as follows:</p>
<p><a href="https://indiantinker.files.wordpress.com/2014/04/final.png"><img class="aligncenter size-full wp-image-647" src="https://indiantinker.files.wordpress.com/2014/04/final.png?w=662" alt="final" /></a></p>
<p>It has two power inputs 12v, 5v and a common ground, all of which are sourced from an ATX! The circuit itself is pretty simple.</p>
<p>The final build on a perfboard is shown below.</p>
<p><a href="https://indiantinker.files.wordpress.com/2014/04/perfboard1.png"><img class="aligncenter size-full wp-image-645" src="https://indiantinker.files.wordpress.com/2014/04/perfboard1.png?w=662" alt="perfboard1" /></a></p>
<p><a href="https://indiantinker.files.wordpress.com/2014/04/perf.png"><img class="aligncenter size-full wp-image-653" src="https://indiantinker.files.wordpress.com/2014/04/perf.png?w=662" alt="PERF" /></a></p>
<p>I chose to use a SMD 0603 10K resistor between pin 8 and 7 to reduce the space and connected 104 (0.1uF) Ceramic caps as shown. The switch is a 10xx and the capacitor is required at the input of stepper driver to reduce supply dips when it draws current. I have used female headers for the motor since most motors come with a connector that can be easily wired up with a single strand wire. I used the Power Terminal connectors for the main 12V Driver supply as the driver is rated for 2.5A which is too high for the usual jumper cables !</p>
<p><a href="https://www.flickr.com/photos/94411929@N06/13828736933" title="top and bottom by Rohit Gupta, on Flickr"><img src="https://farm6.staticflickr.com/5579/13828736933_b4393c9c19_c.jpg" width="800" height="450" alt="top and bottom" /></a><br />
&nbsp;</p>
<p><b>TIP:</b> If you are using the non-tinned/less tinned headers that have been lying around in the component box for a while, make sure to rub the connectors using sandpaper to remove corrosion residue on the contacts else it might seem soldered but it wont actually be soldered. Also you may use some extra flux.</p>
<p>Video:<br />
<div class="jetpack-video-wrapper"><span class="embed-youtube" style="text-align:center; display: block;"><iframe class="youtube-player" type="text/html" width="662" height="403" src="https://www.youtube.com/embed/6tETMOMKnxY?version=3&#038;rel=1&#038;fs=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;wmode=transparent" frameborder="0" allowfullscreen="true"></iframe></span></div></p>
<p>Cheers !</p>
<p>Rohit Gupta</p>
<a href="/2015/09/24/CNCsnMe1/" style="text-align:right;">Read more&nbsp;<i class="fa fa-arrow-circle-right"></i></a>
<br>
<hr>
  </divr
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/09/15/PiTuber/">
        PiTuber- The Low Power Raspberry Pi Youtube Offliner
      </a>
    </h1>

    <span class="post-date">15 Sep 2015</span>

    <blockquote>
  <p><strong>DISCLAIMER</strong>
This article is for exploratory and educational purposes only. Kindly use the code and project responsibly.</p>
</blockquote>

<p>Happy Engineers Day !</p>

<p>Televison and Childhood… These things are inseparable. Remember waiting for your favourite TV show to come live. That experience was certainly unique.TV used to be the bargain if someone had to get things done from kids. TV today is a bit different. It has changed and I would certainly refrain from using the word ‘evolved’. Indian TV is now filled with good-for-nothing ultra HD Home shows that could destroy any household ecosystem if followed. I have rather ‘evolved’ to avoid them.</p>

<p>Being the ‘90’s Kid’, going by the parlance, TV we watched as kids used to have good, humble and light hearted shows. I loved the ones like “Byomkesh Bakshi” , “Recess” ,”Small Wonder”, “Shreeman Shreemati”, “TaleSpin”, “Captain Planet” etc.</p>

<p>So, one fine day while struggling with streaming on my slow connection while watching my favourite show,it occurred to me that a Pi which can runs off my cellphone charger would be a great tool for offlin-ing. Sort of a physical Youtube App on a Pi. Nothing needs to be said about Youtube Experience on Windows Phone !</p>

<p>The system should read a couple of links from a file and then offline them sequentially and store them on the SD Card. It should have a location and quality filter to set a requirements of the video like on the App. Once done watching, <strong>DELETE</strong> !</p>

<p>It turned out to be a pretty easy task. Thanks to <code class="highlighter-rouge">pafy</code> python library. I integrated it to do the url read part from txt file and selecting the required location to save the file.</p>

<p>The steps are pretty simple:</p>

<ul>
  <li>Clone <a href="https://github.com/IndianTinker/PiTUBEr">this</a> repo</li>
  <li>Install <code class="highlighter-rouge">pafy</code> using pip the usual way</li>
  <li>Change the urls in the txt file. Please do preserve the format.</li>
  <li>Edit the script for your preferred quality and storage location.</li>
  <li>Execute the script.</li>
</ul>

<p>If you intend to sleep and leave Pi do the work, you can check an awesome utility called <code class="highlighter-rouge">screen</code> . It just detaches the terminal instance you are on and opens up a new one. Which you can exit, So the task you were originally in the old instance runs. Then Login and restore the instance later.</p>

<p>You can check this amazing tutorial about screen <a href="http://raspi.tv/2012/using-screen-with-raspberry-pi-to-avoid-leaving-ssh-sessions-open">here</a>.</p>

<p>After you are finished, just <code class="highlighter-rouge">SFTP</code> to the pi and copy/cut all the stuff and edit the url.txt file for further jobs.</p>

<p>There can be several extensions of the idea.We can also attach a small LED on one of the Pins to indicate when downloading ends.
Further a NAS can be configured instead of SFTP for easier file exchanges. Better we can combine it with other services to make Pi a Bandwidth Hogger and a mean downloading machine.</p>

<p>Cheers,</p>

<p>Rohit</p>
<a href="/2015/09/15/PiTuber/" style="text-align:right;">Read more&nbsp;<i class="fa fa-arrow-circle-right"></i></a>
<br>
<hr>
  </divr
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/08/08/MotoX/">
        Unbricking a MotoX, Resurrecting Smiles
      </a>
    </h1>

    <span class="post-date">08 Aug 2015</span>

    <p>This didnt seem to be coming ! Some of us were travelling to Bedse Caves on a weekend. <em>[ZT]</em> had the amazing MotoX -Ghost aka 2013 one that served as our primary camera and navigator since he was leading. The MotoX was (or rather is) a flagship phone that gave way for the present generation Moto G and E. But it had an AMOLED that usually steals the show.. If you know what i mean.</p>

<p>The essence of the trip was captured in the phone and we were to meet the next day to swap pictures. I was anticipating it even more as I wanted to write a short trip entry.</p>

<p>The next day <em>[ZT]</em> didnt have the same phone. His hands were graced by a crappy qwerty from the time Texts became cheaper than an alpenliebe.</p>

<p>With profound grief he said, Dude it got bricked after installing an OTA for Lollipop. The worst part he had already tried clear memory.</p>

<p>We discussed how to get it up and running. The obvious choice being service guys! He submitted the phone for repair.</p>

<p>A week passed and he reverted saying the service guys say they cant figure what happened and are saying to change the motherboard costing around 15k INR ($235). Logically.. Its better to buy a new phone.</p>

<p>But AMOLED !</p>

<p>As his search for a new phone began. I thought that since the phone is booting but is stuck in a loop. Maybe the hardware is fine. Its the software that has got hurt. Clueless as a noob, I asked him to give me the <em>brick</em> to play around. He gladly obliged. I searched places to find a solution to assess the gravity of the situation. It turns out, Bootloops are pretty common issues and videos like <a href="https://www.youtube.com/watch?v=2LjoFSgLlds">these</a> were surely encouraging.</p>

<p>Maintaining brevity of the topic, Most android phones have a fastboot mode which is like a BIOS thing that can be used to flash things (usually compiled codes/OS aka ROMs) to the internal memory sectors and then hoping they will all come together to work. This mode gets activated using a hardware trigger (like happens on PCs) which is usually a combination of lock and Volume button. Searching online one can get it for any device. In the X its Vol - + Pwr</p>

<p>And if a device enters a fastboot it should be easy to heal it.
Thankfully our did.</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/20405991741/in/dateposted-public/" title="Fastboot mode"><img src="https://farm1.staticflickr.com/513/20405991741_b8e6f44db4_z.jpg" width="640" height="359" alt="Fastboot mode" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>Now the USB on the MotoX has some durability issues and it was not working on this device. <em>[ZT]</em> says it works when the time and physics are fine. Bummer.. It took me the whole night to connect it via USB to the PC. I turns out i have about 7 USB-micro cables. LOL</p>

<p>At around 2am the space time matrix budged a bit and i was able to connect it using a micromax cable.</p>

<p>Now i started the process whats mentioned on several blogs around the web. Its a generic method to restore any phone via fastboot.</p>

<p>It works well on windows i reckon! All you need is a couple of drivers and the OS you wished to flash (obviously for ur device).</p>

<p>Folks at <strong>XDA Developers</strong> have made a streamlined setup for that <a href="http://forum.xda-developers.com/showthread.php?t=2588979">here</a>. You should get that. Plus you need motorola drivers from motorola website i suggest you get the suite !</p>

<p>For Moto Devices you will need the <a href="https://drive.google.com/file/d/0B2c2Ms7szI99RkpiZWkyZGgyeTQ/edit">mfastboot</a></p>

<p>When you are all set. Go to the adb folder in C: and type <code class="highlighter-rouge">fastboot devices</code> . You should see your device or maybe check USB cable or the word connected written on fastboot screen.</p>

<p>Like this:</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/20213179149/in/dateposted-public/" title="FastBOOT"><img src="https://farm1.staticflickr.com/434/20213179149_5eb4a3748d_z.jpg" width="640" height="359" alt="FastBOOT" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>Now download the ROM from a trusted source. I got the MotoX Kitkat Asia ROM from <a href="https://docs.google.com/file/d/0B5XNxZ2OcfKtdDROTk5kb21ObU0/edit">here</a> after 5 failed downloads.</p>

<p>Now unzip the file and copy the contents of adb folder plus mfastboot exe into the unzipped folder. Rename it to give a short name.</p>

<p>You will find a <code class="highlighter-rouge">.xml</code> file in the ROM that shows the commands for fastboot installation. You have to prefix <code class="highlighter-rouge">fastboot</code> before every command.  For Moto devices use the command <code class="highlighter-rouge">mfastboot flash system system.img</code> instead of  <code class="highlighter-rouge">fastboot flash system system.img</code>
Follow them and make sure your USB is always connected. Mine got disconnected after much efforts that almost killed the excitement for me.I was up all night to get the USB connected after about 100 failed insertion and reinsertion cycles i  gave up to try with the last cable that i had but was in use - The Kindle cable.</p>

<p>Next Day! It got connected in one shot. Followed the commands but forgot the last one <code class="highlighter-rouge">fastboot oem fb_mode_clear</code>. It failed to boot. After much googling i found out the cure and wrote the command.</p>

<p>And it booted…. Yeah!! Victory!</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/20211757430/in/dateposted-public/" title="Resurrected"><img src="https://farm1.staticflickr.com/265/20211757430_1fc13ecc39_z.jpg" width="359" height="640" alt="Resurrected" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>There was one problem. The camera was not working! I ran a couple of checks with <em>[ZT]</em> who quickly came to collect the phone ! I turned out that the Ribbon for camera had loosened. We just pressed it a bit and it was up and running again.</p>

<p>One device saved !</p>

<p>If you guys need any more info shoot the queries in the comment window.</p>

<p>Cheers,</p>

<p>Rohit</p>

<a href="/2015/08/08/MotoX/" style="text-align:right;">Read more&nbsp;<i class="fa fa-arrow-circle-right"></i></a>
<br>
<hr>
  </divr
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page24">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page22">Newer</a>
    
  
</div>

    </div>


  </body>
</html>
