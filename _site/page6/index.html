<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js">
</script>

  <meta name="google-site-verification" content="jnyuLnp8Zt_h8SKLdZzI_qRZ1uOO24uww8-ucfKDbJM" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="twitter:site" content="@rohit7gupta"/>
<meta name="twitter:creator" content="@rohit7gupta"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta content="Rohit Gupta" property="og:site_name"/>


  <meta name="twitter:description" content="Regular Hacks, exploits, projects and tutorials by Rohit Gupta (IndianTinker)"/>


  <meta  property="og:title" content="Home"/>
  <meta name="twitter:title" content="Home"/>
  


  <meta property="og:type" content="article"/>
  <meta property="article:author" content="https://www.facebook.com/rohit7gupta" />


  <meta property="og:url" content="http://localhost:4000/page6/" />



  <meta content="https://farm4.staticflickr.com/3837/15112162250_f1720783c9.jpg" property="og:image"/>
  <meta name="twitter:image:src" content="https://farm4.staticflickr.com/3837/15112162250_f1720783c9.jpg"/>







  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Rohit Gupta &middot; Doer, Designer and Researcher
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
<link href="https://fonts.googleapis.com/css?family=Nunito|Roboto+Mono" rel="stylesheet"> 

  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

<!--Google Analytics-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55965373-1', 'auto');
  ga('send', 'pageview');

</script>
</head>


  <body>


    <div class="sidebar">
 </b>
  <div class="container sidebar-sticky">
<div align="center">
    <img src="/bitmoji.png" height="100px" width="100px" style="clip-path: circle(60px at center)">
</div>
    <div class="sidebar-about">
    <h1 color="#303F9F">
        <a href="/">
          Rohit Gupta
        </a>
      </h1>
      <p class="lead">A blog by <a href="https://twitter.com/rohit7gupta">@rohit7gupta</a></p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/archive/">Archive</a>
          
        
      
        
      
        
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/projects/">Projects</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/publications/">Research</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/travels/">Writings</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

   <!--
    <a class="twitter-follow-button"
  href="https://twitter.com/rohit7gupta"
  data-show-count="false"
  data-lang="en">
Follow @rohit7gupta
</a>
<script type="text/javascript">
window.twttr = (function (d, s, id) {
  var t, js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src= "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);
  return window.twttr || (t = { _e: [], ready: function (f) { t._e.push(f) } });
}(document, "script", "twitter-wjs"));
</script> -->
<br>

<!-- <p style="font-size:1.75rem ;color:#eceff1;">
<a class="list-group-item" href="https://www.twitter.com/rohit7gupta"><i class="fa fa-twitter"></i></a>
<a class="list-group-item" href="https://www.flickr.com/photos/94411929@N06/"><i class="fa fa-flickr"></i></a>
<a class="list-group-item" href="https://www.github.com/indiantinker"><i class="fa fa-github"></i></a>
</p>       

</span>-->
    </nav>
<p style="font-size:0.618rem ;color:black;">Made with <i class="fa fa-heart"></i> in India</a>
</p>

  </div>
</div>


    <div class="content container">
    <div class="post">
  
    </div>
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/09/10/DataViz/">
        Visualizing the Indian Railways in 3D
      </a>
    </h1>

    <span class="post-date">10 Sep 2017</span>

    <blockquote>
  <p>This post describes the concept, process, insights and extensions of a geovisualization project done as a part of Interactive Data Viz course at IDC.</p>
</blockquote>

<p>In the end, I had this 3D visualization.</p>

<p><img src="https://i.imgur.com/5nMTnGP.png" title="source: imgur.com" /></p>

<h2 id="concepts">Concept(s)</h2>
<p>The concept was to visualize the trains that originate from every station on the Indian Railways network. This would allow users to compare the number and even draw conclusions based on their locations. The goal was to be able to make the viz insightful and must atleast follow William Cleveland’s Three Visual Operations i.e Detection, Assembly and Estimation. These were covered during the course. One can also look at this <a href="https://www.slideshare.net/JohnRauser/how-humans-see-data">presentation</a> by <a href="https://www.linkedin.com/in/jrauser/">John Rauser</a>. He covers very interesting aspects about perception of data. Cleveland’s model was mentioned on slide 115 of his presentation. I thought if i could make 3d bars at the location of the stations, such that the height would represent the number of source trains.</p>

<p>In short for the visualization these would be the parameters(based on description tags by Isabel Meirelles in <a href="http://isabelmeirelles.com/book-design-for-information/">Design for information</a>):</p>

<ul>
  <li><strong>COUNTRY</strong> India</li>
  <li><strong>MEDIUM</strong> Online Interactive application</li>
  <li><strong>DOMAIN</strong> Transportation</li>
  <li><strong>TASK</strong> To provide comparison of trains starting from stations</li>
  <li><strong>STRUCTURE</strong> 3D extrusions on station location representing number of trains originating</li>
</ul>

<p>I also thought if we could make a ‘coarse’ contour map that ‘encodes’ the ease of reaching a place. This would be based on an index derived from number of trains passing, stoppage time and time of the day of a particular station. The contour would be drawn inverted such that if a place has less trains passing, its height will be higher as it is difficult to reach. This, I feel, would give some physical property to the contour too. Imagine someone sitting on the ground and it is super difficult to reach a station say <strong>A</strong> as only 1 train passes while its easy to go to say <strong>B</strong> because 10 trains pass by. So, ‘A’ will be shown higher than ‘B’. An icing could be exploring it in VR. I could not figure out the tools to implement this in the short time we had.</p>

<h2 id="process">Process</h2>
<p>The process involved:</p>

<ul>
  <li>Sourcing and cleaning data</li>
  <li>Deriving useful data</li>
  <li>Converting that data into geojson</li>
  <li>Presentation on a map</li>
</ul>

<p>The weapons of choice were : R, Python, Mapbox and Google Sheets</p>

<p><strong>Sourcing and cleaning data</strong>
The data was provided by <a href="https://data.gov.in/catalog/indian-railways-train-time-table-0">data.gov.in</a>. The format used was csv.
I used this <a href="https://rstudio-pubs-static.s3.amazonaws.com/105630_ac3d5832cb8c4c98bbc7f85d84de4ec9.html">source</a> of R codes for reference.</p>

<p><strong>Deriving useful data</strong></p>

<p>First I read the data in R using R Studio.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span><span class="w">
</span><span class="n">timetable</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"C:/Users/my pc/Downloads/isl_wise_train_detail_03082015_v1.csv"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>Next,I made a subset of trains. Hence, I could capture trains that have reached destination.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">timetable.srs.dest</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">timetable</span><span class="p">,</span><span class="w"> </span><span class="n">timetable</span><span class="o">$</span><span class="n">`station Code`</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">timetable</span><span class="o">$</span><span class="n">`Destination station Code`</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>using <code class="highlighter-rouge">dplyr</code>  library, I grouped and summarized data. Then I wrote the file out as a CSV.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">traingp</span><span class="o">&lt;-</span><span class="n">group_by</span><span class="p">(</span><span class="n">timetable.srs.dest</span><span class="p">,</span><span class="n">`source Station Name`</span><span class="p">)</span><span class="w">
</span><span class="n">trainsfromStation</span><span class="o">&lt;-</span><span class="n">summarise</span><span class="p">(</span><span class="n">traingp</span><span class="p">,</span><span class="n">count</span><span class="o">=</span><span class="n">n</span><span class="p">())</span><span class="w">
</span><span class="n">trainsfromStation</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainsfromStation</span><span class="p">,</span><span class="n">desc</span><span class="p">(</span><span class="n">count</span><span class="p">))</span><span class="w">
</span><span class="n">write.csv</span><span class="p">(</span><span class="n">trainsfromStation</span><span class="p">,</span><span class="s2">"NumbOfTrainsoriginating.csv"</span><span class="p">)</span><span class="w">

</span></code></pre></div></div>
<p><a href="https://imgur.com/SI78wWt"><img src="https://i.imgur.com/SI78wWt.png" title="source: imgur.com" /></a></p>

<p>I also did some other exploratory analysis like, trains passing per station.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">trainflux</span><span class="o">&lt;-</span><span class="n">group_by</span><span class="p">(</span><span class="n">timetable</span><span class="p">,</span><span class="n">`Station Name`</span><span class="p">)</span><span class="w">
</span><span class="n">trainflux</span><span class="w">
</span><span class="n">trainfluxCount</span><span class="o">&lt;-</span><span class="n">summarise</span><span class="p">(</span><span class="n">trainflux</span><span class="p">,</span><span class="n">count</span><span class="o">=</span><span class="n">n</span><span class="p">())</span><span class="w">
</span><span class="n">trainfluxCount</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainfluxCount</span><span class="p">,</span><span class="n">desc</span><span class="p">(</span><span class="n">count</span><span class="p">))</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainfluxCount</span><span class="p">,</span><span class="n">count</span><span class="p">)</span><span class="w">
</span><span class="n">write.csv</span><span class="p">(</span><span class="n">trainfluxCount</span><span class="p">,</span><span class="s2">"trainsstoppingperstation.csv"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><a href="https://imgur.com/D6cfV6H"><img src="https://i.imgur.com/D6cfV6H.png" title="source: imgur.com" /></a></p>

<p>Halt times and Average halt times per station too. This would make give an idea of how busy a station is. This was not trivial as it seems, thanks to my n00by R skills. First, all source and destination stations were removed using <code class="highlighter-rouge">Distance !=0</code>. Then because of the funny way times were mentioned, I had to remove ‘single’ quotes in all time vectors. I used <code class="highlighter-rouge">gsub</code> for that. Then, I had to convert the char to POSIXlt date format. This would enable time computation using <code class="highlighter-rouge">difftime</code>. Using difftime I made a new vector for HaltTime with a minute resolution. I am told, these steps are just a few clicks in excel.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">trainNoSource</span><span class="o">=</span><span class="n">subset</span><span class="p">(</span><span class="n">timetable</span><span class="p">,</span><span class="n">dataset</span><span class="o">$</span><span class="n">Distance</span><span class="o">!=</span><span class="m">0</span><span class="p">)</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Arrival time`</span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"'"</span><span class="p">,</span><span class="s1">''</span><span class="p">,</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Arrival time`</span><span class="p">)</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Departure time`</span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"'"</span><span class="p">,</span><span class="s1">''</span><span class="p">,</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Departure time`</span><span class="p">)</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Arrival time`</span><span class="o">&lt;-</span><span class="n">strptime</span><span class="p">(</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Arrival time`</span><span class="p">,</span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="s2">"%H:%M:%S"</span><span class="p">))</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Departure time`</span><span class="o">&lt;-</span><span class="n">strptime</span><span class="p">(</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Departure time`</span><span class="p">,</span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="s2">"%H:%M:%S"</span><span class="p">))</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Halt Time`</span><span class="o">&lt;-</span><span class="n">as.difftime</span><span class="p">(</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Departure time`</span><span class="o">-</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Arrival time`</span><span class="p">,</span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"%H:%M:%S"</span><span class="p">,</span><span class="n">units</span><span class="o">=</span><span class="s2">"mins"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>Next, I removed trains that had halt times less than 0 and grouped them by stations. I removed Arrival and Departure vectors. I then studied the average halt times.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">trainNoSource</span><span class="o">=</span><span class="n">subset</span><span class="p">(</span><span class="n">trainNoSource</span><span class="p">,</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Halt Time`</span><span class="o">&gt;=</span><span class="m">0</span><span class="p">)</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Arrival time`</span><span class="o">&lt;-</span><span class="kc">NULL</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Departure time`</span><span class="o">&lt;-</span><span class="kc">NULL</span><span class="w">
</span><span class="n">trainNoSource_grpstation</span><span class="o">&lt;-</span><span class="n">group_by</span><span class="p">(</span><span class="n">trainNoSource</span><span class="p">,</span><span class="n">`Station Name`</span><span class="p">)</span><span class="w">
</span><span class="n">trainNoSource_haltTimes</span><span class="o">&lt;-</span><span class="n">summarise</span><span class="p">(</span><span class="n">trainNoSource_grpstation</span><span class="p">,</span><span class="n">count</span><span class="o">=</span><span class="n">n</span><span class="p">(),</span><span class="n">totalhalt</span><span class="o">=</span><span class="nf">sum</span><span class="p">(</span><span class="n">trainNoSource_grpstation</span><span class="o">$</span><span class="n">`Halt Time`</span><span class="p">))</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainNoSource_haltTimes</span><span class="p">,</span><span class="n">desc</span><span class="p">(</span><span class="n">count</span><span class="p">))</span><span class="w">
</span><span class="n">trainNoSource_haltTimes</span><span class="o">&lt;-</span><span class="n">summarise</span><span class="p">(</span><span class="n">trainNoSource_grpstation</span><span class="p">,</span><span class="n">count</span><span class="o">=</span><span class="n">n</span><span class="p">(),</span><span class="n">totalhalt</span><span class="o">=</span><span class="nf">sum</span><span class="p">(</span><span class="n">`Halt Time`</span><span class="p">))</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainNoSource_haltTimes</span><span class="p">,</span><span class="n">desc</span><span class="p">(</span><span class="n">count</span><span class="p">))</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainNoSource_haltTimes</span><span class="p">,</span><span class="n">desc</span><span class="p">(</span><span class="n">totalhalt</span><span class="p">))</span><span class="w">
</span><span class="n">trainNoSource_haltTimes</span><span class="o">$</span><span class="n">`avgstop`</span><span class="o">&lt;-</span><span class="n">trainNoSource_haltTimes</span><span class="o">$</span><span class="n">totalhalt</span><span class="o">/</span><span class="n">trainNoSource_haltTimes</span><span class="o">$</span><span class="s1">'count'</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainNoSource_haltTimes</span><span class="p">,</span><span class="n">desc</span><span class="p">(</span><span class="n">avgstop</span><span class="p">))</span><span class="w">
</span><span class="n">write.csv</span><span class="p">(</span><span class="n">trainNoSource_haltTimes</span><span class="p">,</span><span class="s2">"avgHaltTimeperstation.csv"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p><a href="https://imgur.com/D6cfV6H"><img src="https://i.imgur.com/D6cfV6H.png" title="source: imgur.com" /></a></p>

<p><strong>Converting that data into geojson</strong></p>

<p>The csv file was uploaded on google sheets. I used the <a href="https://chrome.google.com/webstore/detail/geocode-by-awesome-table/cnhboknahecjdnlkjnlodacdjelippfg?hl=en">awesome tables</a> google sheets plugin to convert station codes to lat and long values.</p>

<p>Unfortunately there is very little documentation for extrusion using mapbox. Just <a href="https://www.mapbox.com/mapbox-gl-js/example/3d-extrusion-floorplan/">an example</a>, which took me quite some time to get to work. From the example <a href="https://www.mapbox.com/mapbox-gl-js/assets/data/indoor-3d-map.geojson">geojson</a>, it seems a <code class="highlighter-rouge">height</code>, <code class="highlighter-rouge">base height</code> and <code class="highlighter-rouge">color</code> properties are required. I wanted less complications, so i went with a single color. I structured the the <a href="https://docs.google.com/spreadsheets/d/11PcWeaLH1PImgipF80lmdjKiA19Tn-BFoyatt3i5hMg/edit?usp=sharing">google sheet</a> file as below.</p>

<p><a href="https://imgur.com/wR2tvOi"><img src="https://i.imgur.com/wR2tvOi.png" title="source: imgur.com" /></a></p>

<p>Then, I used <a href="http://geojson.io">geojson.io</a> to convert the csv to a geojson file. One can also use the <a href="https://www.mapbox.com/studio/">mapbox studio</a> for the same.</p>

<p>This might seem enough, but</p>

<blockquote>
  <p>Little did i know</p>
</blockquote>

<p>The extrusion property can be applied only on polygons. How to convert a point to a polygon? This might not be the most relevant question to ask at 3:45 am in the morning. But unfortunately, it was ! <code class="highlighter-rouge">Python</code> to the rescue. Thanks to some <a href="https://s3-us-west-2.amazonaws.com/rohitgupta/main.html">previous work</a> .</p>

<p>In times when, ‘I wrote a script’ has become as common as ‘I took a bath’, I wrote a script.</p>

<p>The script would <code class="highlighter-rouge">simply</code> take the points and convert it into a square of a fixed size. The <a href="https://tools.ietf.org/html/rfc7946#section-3.1.6">geoJSON spec sheet</a> was helpful. The process was take the point as the center of the square and them compute the corners in a cyclic manner.</p>

<p><strong>Presentation on a map</strong></p>

<p>By 6am, I had all polygons on the map in mapbox studio. To extrude the height, I had multiplied the train number by 7000 as it seemed to make a lot of effect on Visual detection and helped estimation. I later used the mapbox example and modified it to add tooltips too.</p>

<p>The result is hosted <a href="http://rohitg.in/DataViz/index.html">here</a>. The project is in this <a href="https://github.com/IndianTinker/DataViz">repo</a>. Feel free to correct me if I am wrong.</p>

<h2 id="insights">Insights</h2>
<p>Some insights we had during our class discussion were:</p>

<ul>
  <li>Vadodra has just one train originating but 298 passing through it
<a href="https://imgur.com/ltiPG0t"><img src="https://i.imgur.com/ltiPG0t.png" title="source: imgur.com" /></a></li>
  <li>There are ‘international’ trains originating from Dhaka
<a href="https://imgur.com/rhdnM7z"><img src="https://i.imgur.com/rhdnM7z.png" title="source: imgur.com" /></a></li>
  <li>Howrah has the most trains starting
<a href="https://imgur.com/fVqVIft"><img src="https://i.imgur.com/fVqVIft.png" title="source: imgur.com" /></a></li>
  <li>Trains move from outside to inside as more trains originate at boundaries.
<a href="https://imgur.com/u6F0xPr"><img src="https://i.imgur.com/u6F0xPr.png" title="source: imgur.com" /></a></li>
</ul>

<h2 id="extensions">Extensions</h2>
<ul>
  <li>Employ redundancy using color channel to allow users know what range of trains originate. A color for say 1-10, 10-20 etc .</li>
  <li>Add another layer of passing by trains</li>
  <li>See if insights could be found if trains could be visualized with population.</li>
</ul>

<p>Hope this helps !</p>

<p>Cheers,</p>

<p>Rohit</p>
<a href="/2017/09/10/DataViz/" style="text-align:right;">Read more&nbsp;<i class="fa fa-arrow-circle-right"></i></a>
<br>
<hr>
  </divr
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/09/03/whowe/">
        Who you are is what you get
      </a>
    </h1>

    <span class="post-date">03 Sep 2017</span>

    <blockquote>
  <p>A published paper on this work can be read <a href="http://ifip-tc13.org/wp-content/uploads/2017/09/INTERACT_2017_Adjunct_FINAL.pdf">here</a> on page 132.</p>
</blockquote>

<p>Information seems to have affected the pace of human evolution. Early humans could remember more information than the modern man. We today live in a world where information is ubiquitous and externalized. With ambient connectivity, this seems to have lead to a reduced information storage in biological memory. Hence, information is ambient. The ease and implementation of search engines has affected the inherent confirmation bias. This leads to a lack of objectivity in the information presented. Through the means of this installation, I intend to show the biased nature of modern pursuit of information. The mirror reflects what a user is and not what maybe true.</p>

<h4>Installation Design</h4>

<p>The participant cannot interact with the screen in any way. However, the screen and the mirror make the overall design open to interpretation. Some participants may ignore the presence, but some may figure out the true metaphor.The mirror reflects the participant and the search results she expects are filled with ”you may  like”  items.  It  is  a  search  that  pleases  and  not  enlightens. The  search  is so personalized that it ’reflects’ your identity. But that metaphor is not a single authoritative interpretation but rather may lead to multiple heterogeneous interpretations as explored by Sengers et. al. The device was exhibited on an office table at the venue. I hope that this artifact can help trigger a sense of uneasiness and encourage the participants to think on issues like privacy and biased nature of information they consume.</p>

<p>In order to present the precious and dear nature of our engagement with search engines, I painted the monitor in gold.</p>

<h4>Prototyping</h4>

<p>Painting the monitor gold
<img src="https://i.imgur.com/teVTNtM.jpg" alt="Imgur" /></p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/dnAufVPr7P8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>

<p>Had some help from the paint studio after messing up the first coat.
<img src="https://i.imgur.com/x9ireNm.jpg" alt="Imgur" /></p>

<p>Fixing the one way glass
<img src="https://i.imgur.com/gp38MXV.jpg" alt="Imgur" /></p>

<p>Checking the reflection
<img src="https://i.imgur.com/N5ErrCV.jpg" alt="Imgur" /></p>

<p>At the conference
<img src="https://i.imgur.com/JnJgXkG.jpg" alt="Imgur" /></p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/interact2017/37474673211/in/dateposted/" title="DSC_3938"><img src="https://farm5.staticflickr.com/4448/37474673211_ce60a32935_z.jpg" width="640" height="428" alt="DSC_3938" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>Cheers,</p>

<p>Rohit</p>
<a href="/2017/09/03/whowe/" style="text-align:right;">Read more&nbsp;<i class="fa fa-arrow-circle-right"></i></a>
<br>
<hr>
  </divr
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/08/31/ContribOSM/">
        Contributing to OSM using JOSM
      </a>
    </h1>

    <span class="post-date">31 Aug 2017</span>

    <blockquote>
  <p>This post is meant to document to process of uploading data points gathered as a part of <a href="https://info-design-lab.github.io/">Interactive Data Viz</a> course at IDC taught by Prof. Venkat.</p>
</blockquote>

<h2 id="goal">Goal</h2>
<p>The aim of the exercise was to experience the process of collecting, analyzing and contributing data points to <a href="https://www.openstreetmap.org">openstreetmaps</a>. This would allow the class to cperform a <strong>data mash-up</strong>. A data mash-up happens when a lot of data on various things is presented on a common -graphical- medium like maps. Data mash-ups can help us draw insights and suggest causality for certain occurrences. Through our experience, we learned that the density of data for a mash-up should be very high to draw interesting inferences.</p>

<h2 id="data-collection">Data Collection</h2>

<p>There are several ways to collect data:</p>

<ul>
  <li><strong>Manual method</strong> : It involves taking a printout of your area under exploration using <a href="http://fieldpapers.org/">Field papers</a> and then once in the field, one marks places on the map. These positions are then manually plotted on the OSM map using their online editors or JOSM. The drawback of this methods is the accuracy. Since, the marking is relative, missile accuracy is often difficult to achieve. The advantage is that it allows more freedom and can work without phones. Hence, if a mapathon is organized then it would be better to use such a method that reduces the dependency on phones. There could be a specific group of people who would collect these sheets and mark these points on OSM later. Thanks for the tip, <a href="https://www.mapbox.com/about/team/rasagy-sharma/">Rasagy</a>.</li>
  <li><strong>Apps</strong> : There are several Apps for <em>Android</em>. The goal is to essentially get a KML file. Most people used <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.m4b&amp;hl=en">Google MyMaps</a>. Other options are <a href="https://play.google.com/store/apps/details?id=np.com.softwel.swmaps&amp;hl=en">SWMaps</a> and <a href="https://play.google.com/store/apps/details?id=com.mapswithme.maps.pro&amp;hl=en">Maps.me</a>. iPhone users can use the web version of Google MyMaps and plot the data manually on it. It gets stored in gDrive. Then export the kml out of gDrive. This method was followed by Shilpa. If anyone knows of a better way, please be sure to suggest.</li>
</ul>

<p>In conclusion, I think if the data is less (&lt; 20 points say) and precision is not required, then field paper method would be faster. This reduces the time wasted in converting formats. The data can then be replicated on the map using <a href="http://wiki.openstreetmap.org/wiki/ID">iD</a> or <a href="http://wiki.openstreetmap.org/wiki/Potlatch_2">Potlatch2</a>(Flash alert!!). These editors are available online and many of my classmates with less number of points used them.</p>

<p>For a larger number of points we will proceed with JOSM method.</p>

<h2 id="post-data-collection">Post Data Collection</h2>

<p><strong>Preparing data</strong></p>

<p>Once you have your data points in KML or CSV or geoJson. You can proceed with the following process. It is advisable to have a geoJson file. It helps in running vizualization when using Mapbox. Helpful tools are :</p>

<ul>
  <li><a href="https://mapbox.github.io/togeojson/">KML/GPX to geoJson</a></li>
  <li><a href="http://geojson.io">geoJson to CSV</a></li>
</ul>

<p>The process I followed was KML –&gt; CSV –&gt;geoJson</p>

<p><strong>Icons and OSM features</strong></p>

<p>Like Mapbox’s Maki icons, OSM also has its own set of icons. They can be rendered on the map when you choose specific tags. The list of tags are mentioned <a href="http://wiki.openstreetmap.org/wiki/Map_Features">here</a>. The icons column on the page shows the icons that will be shown on the map. For example : I chose to map sitting places in IIT Campus. The most semantically suitable choice was of a bench. I used the ‘field’ as ‘amenity’ and value as ‘bench’. You can choose appropriately. The features can be added to the points using the CSV file. Once you have the CSV file you can add a new ‘column’ as amenity (in my case) using your favorite spreadsheet software. Now, in every ‘row’ i.e. for each data point add the value. This would be ‘bench’ in my case. You can have additional fields as well. It is preffered not to have spaces in between the words of the field. Use an ‘_’ .</p>

<p>Once this is done, you should have a dataset in csv we can proceed to map them on OSM. As an additional step, I also generate a geoJSON file.</p>

<p>Rasagy suggested some <em>pro-tips</em> like :</p>

<ul>
  <li>
    <p><a href="http://wiki.openstreetmap.org/wiki/Tagging_for_the_renderer">Tagging for the renderer</a>: The point is to collect the data and not have icons marked on the map. As many features might not have icons for them, it is suggested to mark real data.</p>
  </li>
  <li>
    <p><a href="http://wiki.openstreetmap.org/wiki/One_feature,_one_OSM_element">One feature, one element</a> : This point should be considered when adding details to already existing features. Instead of adding a new node/point for some area, it is better to include that detail in the existing polygon itself.</p>
  </li>
  <li>
    <p><a href="http://wiki.openstreetmap.org/wiki/Key:operator">Operator- Key</a>: Since, facilities in IIT will probably be run by IIT. It is worthwhile to include an <em>operator</em> key in the data. For example: The staff canteen could have an “operator: IIT Bombay” tag.</p>
  </li>
</ul>

<p>Some other tips i found <a href="http://wiki.openstreetmap.org/wiki/Good_practice">here</a> that deserve a mention are:</p>

<ul>
  <li><a href="http://wiki.openstreetmap.org/wiki/Armchair_mapping">Refrain from Armchair mapping</a></li>
  <li>Do not add temporary events on the OSM map. These could include things like Ganpati Pandals. One can use the <em>geojson on map</em> approach for this.</li>
  <li>Map for verifiability. Hence, mapping historical events on OSM is not a good practise.</li>
  <li>If you find that your data needs a new tag on OSM, then follow this <a href="http://wiki.openstreetmap.org/wiki/New_Features">new features</a> page .</li>
</ul>

<p><strong>OSM Contributing</strong></p>

<p>As a class, we tried several methods. The following method uses the <a href="https://josm.openstreetmap.de/">JOSM IDE</a> to import the data as a map layer and then contribute it to OSM database. <strong>Before proceeding</strong>, check multiple times that your data fields are correctly rendered. You can test this <a href="http://geojson.io">here</a>. Once you update, it <em>might</em> be cubersome to update/edit them .</p>

<p>First, Download the <a href="https://josm.openstreetmap.de/">IDE</a>  for the OS of your own choice.</p>

<p>I have documented it for windows that came <a href="https://www.youtube.com/watch?v=wF_vKXrOtY8">bunduru</a>-ed with my machine.</p>

<p>Once, the software is installed, we need to install a plugin called <em>OpenData</em> this enables JOSM to read csv files. Press F12 or Edit -&gt; Pref and choose plugins and type opendata. You may want to do Download list before. Then check the box and click OK. This installs OpenData plugin.</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/36952326825/in/album-72157686030264413/" title="opendata"><img src="https://farm5.staticflickr.com/4410/36952326825_4062955f0f_z.jpg" width="640" height="621" alt="opendata" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>Now we need a map layer to work on. The preffered way is to use ‘open location’ option from ‘File’ menu option. You are presented with the following dialog.</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/36812725461/in/album-72157686030264413/" title="FileDownload"><img src="https://farm5.staticflickr.com/4367/36812725461_07f1def4bb_z.jpg" width="590" height="298" alt="FileDownload" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>In this dialog, paste the url of the map you wish JOSM to pull. In my case, it was this <a href="http://www.openstreetmap.org/#map=15/19.1337/72.9126">http://www.openstreetmap.org/#map=15/19.1337/72.9126</a>.</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/36952326615/in/album-72157686030264413/" title="osm"><img src="https://farm5.staticflickr.com/4404/36952326615_fcddd6a18f_z.jpg" width="640" height="341" alt="osm" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>Once downloaded, I got this.</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/36952326985/in/album-72157686030264413/" title="result"><img src="https://farm5.staticflickr.com/4337/36952326985_bd8d70a0a7_z.jpg" width="640" height="337" alt="result" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>By the this point, we have a base layer ready. Now, I opened the csv file. The usual File –&gt; Open way .</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/36764737856/in/album-72157686030264413/" title="openfiles"><img src="https://farm5.staticflickr.com/4382/36764737856_5857da0a1e_z.jpg" width="640" height="411" alt="openfiles" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>My file is ‘points.csv’.Click Open. In the popup while importing CSV. The default options worked.
The file gets rendered correctly over the base layer as points. In my case the color of points was cyan.</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/36812725561/in/album-72157686030264413/" title="bench local"><img src="https://farm5.staticflickr.com/4437/36812725561_7f6556a133_z.jpg" width="640" height="343" alt="bench local" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>Please check the points before proceeding.</p>

<p><strong>Uploading to OSM</strong></p>

<p>Once checked, you may proceed by clicking on the upload icon. I got this warning popup. I clicked continue as I had checked the data multiple times.
<a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/36764737376/in/album-72157686030264413/" title="warning"><img src="https://farm5.staticflickr.com/4335/36764737376_53d00d84ca_z.jpg" width="640" height="290" alt="warning" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>Next you get another warning. One of the fields had a space in between. I chose to ignore it as it was not a standard field anyway. But, I would strictly advice that you use only features mentioned in <a href="http://wiki.openstreetmap.org/wiki/Map_Features">wiki</a>. One should never mark outside the wiki, this would make your contributions virtually indiscoverable as the standard parsers/scrapers/crawlers would only use standard tags. If none of the tags fit the feature, you should request that particular tag to be added to the wiki.”This prevents everyone from tagging similar kind of features in their own way before a standard is set, and therefore OSM discourages using tags outside of what is currently listed on the wiki”, adds Rasagy.</p>

<p>You need an OSM account to upload. The API uses OAuth. The method that worked for me is ‘Automatic’. You are likely to get OAuth credentials. JOSM stores them for you. After the authorization part, you are required to commit the changes.  You will be presented with the following dialog.</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/36764737336/in/album-72157686030264413/" title="upload"><img src="https://farm5.staticflickr.com/4346/36764737336_42cf629aa7_z.jpg" width="640" height="618" alt="upload" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>I chose the data source as ‘survey’. Now, press ‘Upload’!</p>

<p>Congratulations on contributing to OSM.</p>

<p>You can reopen the location to see your data. In my case, my benches are on the map.
<a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/36814389321/in/dateposted-public/" title="markedbench"><img src="https://farm5.staticflickr.com/4343/36814389321_6c90e0ab13_z.jpg" width="640" height="341" alt="markedbench" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>You can pull the details by clicking on ‘History’ button.
<a data-flickr-embed="true" href="https://www.flickr.com/photos/94411929@N06/36812725511/in/dateposted-public/" title="contributorInfo"><img src="https://farm5.staticflickr.com/4364/36812725511_a9ee731fe2_z.jpg" width="640" height="362" alt="contributorInfo" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>I hope this guide will be helpful.</p>

<h2 id="data-contributed-in-the-course">Data contributed in the course</h2>

<p>Following are the details of features marked by my classmates:</p>

<table>
  <thead>
    <tr>
      <th>Sno.</th>
      <th>Feature Marked</th>
      <th>Number</th>
      <th>Contributor</th>
      <th>tags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Police Posts</td>
      <td>56</td>
      <td>Udayan</td>
      <td>amenity=police</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Ladies Restroom</td>
      <td>205</td>
      <td>Shilpa</td>
      <td>amenity=toilets;access=customers;female=yes;level=0; repeat_on=(floors)</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Fire Hydrants</td>
      <td>95</td>
      <td>Amit</td>
      <td>emergency: fire_hydrant</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Dustbins</td>
      <td>115</td>
      <td>Manasi</td>
      <td>amenity=waste_basket</td>
    </tr>
    <tr>
      <td>5</td>
      <td>Tea Shops</td>
      <td>20</td>
      <td>Pallavi</td>
      <td>shop=tea</td>
    </tr>
    <tr>
      <td>6</td>
      <td>Auto Stops</td>
      <td>14</td>
      <td>Raagul</td>
      <td>amenity=taxi</td>
    </tr>
    <tr>
      <td>7</td>
      <td>Print Shops</td>
      <td>16</td>
      <td>Vineet</td>
      <td>shop=copyshop;service:copy=yes;service:print=yes;service:generalitems=yes;operator: name of the shop</td>
    </tr>
    <tr>
      <td>8</td>
      <td>Benches</td>
      <td>54</td>
      <td>Rohit</td>
      <td>amenity=bench;covered=(state);seats=(number)</td>
    </tr>
    <tr>
      <td>9</td>
      <td>Drinking Water Spots</td>
      <td>56</td>
      <td>Manoj</td>
      <td>amenity=drinking_water</td>
    </tr>
  </tbody>
</table>

<p><strong>Links</strong></p>

<p>Some useful links :</p>

<ul>
  <li><a href="http://wiki.openstreetmap.org/wiki/Main_Page">OSM wiki</a></li>
  <li><a href="http://wiki.openstreetmap.org/wiki/Beginners%27_guide">Beginner’s guide on the OSMwiki</a></li>
  <li><a href="http://learnosm.org/en/">LearnOSM</a></li>
  <li><a href="https://www.mapbox.com/mapping/">Mapbox’s Mapping guides</a></li>
</ul>

<p><strong>Acknowledgements</strong></p>

<p>I acknowledge my classmates, Prof. Venkat and Rasagy for their contributions to this post.</p>

<p>Cheers,</p>

<p>Rohit</p>
<a href="/2017/08/31/ContribOSM/" style="text-align:right;">Read more&nbsp;<i class="fa fa-arrow-circle-right"></i></a>
<br>
<hr>
  </divr
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page7">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page5">Newer</a>
    
  
</div>

    </div>


  </body>
</html>
