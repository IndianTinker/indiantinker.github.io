<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js">
</script>

  <meta name="google-site-verification" content="jnyuLnp8Zt_h8SKLdZzI_qRZ1uOO24uww8-ucfKDbJM" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="twitter:site" content="@rohit7gupta"/>
<meta name="twitter:creator" content="@rohit7gupta"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta content="Rohit Gupta" property="og:site_name"/>


  <meta name="twitter:description" content="Regular Hacks, exploits, projects and tutorials by Rohit Gupta (IndianTinker)"/>


  <meta  property="og:title" content="Home"/>
  <meta name="twitter:title" content="Home"/>
  


  <meta property="og:type" content="article"/>
  <meta property="article:author" content="https://www.facebook.com/rohit7gupta" />


  <meta property="og:url" content="http://rohitg.in/page8/" />



  <meta content="https://farm4.staticflickr.com/3837/15112162250_f1720783c9.jpg" property="og:image"/>
  <meta name="twitter:image:src" content="https://farm4.staticflickr.com/3837/15112162250_f1720783c9.jpg"/>







  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Rohit Gupta &middot; Critical Technologist and Plural optimist
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
<link href="https://fonts.googleapis.com/css?family=Nunito|Roboto+Mono" rel="stylesheet"> 

  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

<!--Google Analytics-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55965373-1', 'auto');
  ga('send', 'pageview');

</script>
</head>


  <body>


    <div class="sidebar">
 </b>
  <div class="container sidebar-sticky">
<div align="center">
    <img src="/bitmoji.png" height="100px" width="100px" style="clip-path: circle(60px at center)">
</div>
    <div class="sidebar-about">
    <h1 color="#303F9F">
        <a href="/">
          Rohit Gupta
        </a>
      </h1>
      <p class="lead">A blog by <a href="https://twitter.com/rohit7gupta">@rohit7gupta</a></p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/archive/">Archive</a>
          
        
      
        
      
        
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/projects/">Projects</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/publications/">Research</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/travels/">Writings</a>
          
        
      
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      

   <!--
    <a class="twitter-follow-button"
  href="https://twitter.com/rohit7gupta"
  data-show-count="false"
  data-lang="en">
Follow @rohit7gupta
</a>
<script type="text/javascript">
window.twttr = (function (d, s, id) {
  var t, js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src= "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);
  return window.twttr || (t = { _e: [], ready: function (f) { t._e.push(f) } });
}(document, "script", "twitter-wjs"));
</script> -->
<br>

<!-- <p style="font-size:1.75rem ;color:#eceff1;">
<a class="list-group-item" href="https://www.twitter.com/rohit7gupta"><i class="fa fa-twitter"></i></a>
<a class="list-group-item" href="https://www.flickr.com/photos/94411929@N06/"><i class="fa fa-flickr"></i></a>
<a class="list-group-item" href="https://www.github.com/indiantinker"><i class="fa fa-github"></i></a>
</p>       

</span>-->
    </nav>
<p style="font-size:0.618rem ;color:black;">Made with <i class="fa fa-heart"></i> in India</a>
</p>

  </div>
</div>


    <div class="content container">
    <div class="post">
  
    </div>
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/12/03/fand/">
        FAND - shareable haptic foot interface device
      </a>
    </h1>

    <span class="post-date">03 Dec 2017</span>

    <blockquote>
  <p>The project research was presented at IEEE SeGAH 2018, Vienna in a paper published as <a href="https://ieeexplore.ieee.org/abstract/document/8401321"> Gupta,R. &amp; Dalvi, G (2018, May). FAND: A shareable haptic foot interface device. </a> .</p>
</blockquote>

<p>FAND (Foot associated neural device) is a haptic interface device that allows users to operate a computer (or certain applications) using all four limbs. The device uses user trained motion gestures that are bound to actions on a compatible application. One may be surprised to know that foot is only 10% less accurate than the hand. The interaction model developed in the project divides a task in a primary action and a secondary action. The primary, high priority and accurate task is handled by the hand, while the secondary tasks are handled by the foot. Devices like these are useful in times when most of our interaction are performed by the hands. This has increased the physiological load on hands. The possible applications are in applications like creative apps, Walking in Place (WIP) interactions in VR, and gaming. I evaluated the device by comparing it with a novel hand interaction device. In the study it was found that the foot device offers comparable learning and may be considered as a possible modality.</p>

<p><img src="https://i.imgur.com/Vxondpp.png" alt="Imgur" /></p>

<p>The video demonstrating the concept is shown below:</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/ByvJjlRdu9M" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen=""></iframe>

<h4>User Persona</h4>
<p><img src="https://i.imgur.com/N2sgquh.png" alt="Imgur" />
<img src="https://i.imgur.com/W7SAryx.png" alt="Imgur" />
<img src="https://i.imgur.com/v5pzbJk.png" alt="Imgur" /></p>

<p>Several explorations and ideation were done in light of previous works and user studies conducted. The final report is be available <a href="https://drive.google.com/file/d/1CH4XgkzvzWaVjZDxJgtrWlma4ZTeb1hH/view?usp=sharing">here</a>. This report was made in Google Docs. ProTip: Do not use google docs of large documents. I never use google docs for more than 10 pages.</p>

<p>The post only covers some parts of a rather long design process (~ 6 months). I tried several techniques to understand the design of gesture systems. I did a <a href="https://faculty.washington.edu/wobbrock/">Wobbrock</a> style study to derive the guess-ability of certain guestures. The users were should de-contextualized prompts to certain interactions and were asked to come up with responses. I would encourage reading the paper by Wobbrock et al.</p>

<p>The prompts were like the below for zoom:
<img src="https://i.imgur.com/AfqMZQs.gif" alt="Imgur" /></p>

<p>Based on my <strong>user set</strong> the gesture set was as follows. One can obviously spot the similarities between these interactions and interactions performed by hands. Many users agreed that they performed the most natural interactions they could think of.
<img src="https://i.imgur.com/P87F5J1.png" alt="Imgur" /></p>

<p>The gesture set was used with the following <em>design requirements</em> to come up with several concepts.
<img src="https://i.imgur.com/1VtQrY4.png" alt="Imgur" /></p>

<p>The most dominant concept was of a shareable foot accessory that was prototyped. The process of prototyping was done separately for both form and function.</p>

<p>Form variations considering sharing and multiple foot types
<img src="https://i.imgur.com/OuFxiwN.png" alt="Imgur" />
<img src="https://i.imgur.com/fokP6Um.png" alt="Imgur" /></p>

<p>Functional Prototype made using Arduino running thresholding and a simple wave pattern recognizer algorithm on the data of a MPU6050 gyro sensor</p>

<p><img src="https://i.imgur.com/TGOhCAQ.png" alt="Imgur" /></p>

<p>The prototype was tested with users using a true experiment design. The results showed that F(4,20) at p&lt;0.05 the device when compared to a new type of hand device like trackpoint has statistical significance (repeated measures ANOVA).Hence, both devices have similar learnability.</p>

<p>Cheers,</p>

<p>Rohit</p>
<a href="/2017/12/03/fand/" style="text-align:right;">Read more&nbsp;<i class="fa fa-arrow-circle-right"></i></a>
<br>
<hr>
  </divr
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/12/01/BeingDPC/">
        Notes on being a department placement co-ordinator at IDC, IIT Bombay
      </a>
    </h1>

    <span class="post-date">01 Dec 2017</span>

    <p>This post was made to avoid me “replaying” the episodic events of placements to whoever comes in to do groundwork for the post of a Placement Manager. It feels more like interrogation from unknown individuals.</p>

<p>The following is the “job description” for an IDC DPC. I hope that this would change in the future. Students, typically - IDCians and IDC DPCs would get more accountable to the work they signed up for. The point to remember is that everyone has work during those days and giving up on your position does not help in a highly connected system like the placements. It only increases the stress on other members.</p>

<p>The list is (mostly chronological) :</p>

<ol>
  <li>Getting students to pay for the placements.</li>
  <li>Ask them to join the “not-so-useful” google group</li>
  <li>Help them make resumes and get it verified, iteratively.</li>
  <li>Collect companies from various sources like:
    <ul>
      <li>Wishlists</li>
      <li>Past recruiters</li>
      <li>Organic converts</li>
      <li>Internship</li>
      <li>Engineering JAFS</li>
      <li>Alumnus</li>
      <li>CCL</li>
    </ul>
  </li>
  <li>Collect preference list from students</li>
  <li>Get contacts</li>
  <li>Contact them reiteratively</li>
  <li>Get them to Register or register them</li>
  <li>Take JD from them and fill the JAF if HR is unable to do so.</li>
  <li>Ask them iteratively to send the details for verification</li>
  <li>Get the JAF verified from EO and EXO</li>
  <li>Slot the companies</li>
  <li>Negotiate slots with companies, PM and students</li>
  <li>Open JAF for students for min 2 days</li>
  <li>Put up a blog post for the same</li>
  <li>Push JAF information on Whatsapp and contact some individual students who are not there on these platforms via email and phone</li>
  <li>Solve student queries regarding JAFS and help them apply for the same</li>
  <li>Push students to apply as they wont and wait for the last moment</li>
  <li>Inform companies that the JAF has closed and assist them in downloading the resumes/portfolios</li>
  <li>Push them to release shortlists, if any</li>
  <li>Push shortlist on blog.</li>
  <li>Inform students via Email/Whatsapp/phone calls</li>
  <li>Get the tasks from companies, if any</li>
  <li>Push the same on the blog</li>
  <li>Assist students on logistics</li>
  <li>Keep reminding late submitters</li>
  <li>Collect tasks from all students and compile it</li>
  <li>Send it to HR and push for another shortlist</li>
  <li>Put the shortlist on blog</li>
  <li>Inform students again about shortlists vis Whatsapp/ email/ phonecalls</li>
  <li>Motivate and create hope</li>
  <li>Keep converting companies and adding JAFS</li>
  <li>Reopen JAFs if student to job probability falls or if companies want</li>
  <li>Ask confirmed HRs to fill IRF and arrange/negotiate for logistics</li>
  <li>co-ordinate with HRs about housing, food and travel</li>
  <li>Make PPTs happen</li>
  <li>Teach students how to fill preferences and get them filled</li>
  <li>Search for SPOCs on the day of placement. Kids you have never met.</li>
  <li>Get the floor plan made and SPOCs ready to turn up.</li>
  <li>Mail the details to HRs. The HRs whom we mail often are not the same as visting or they do not check emails. So, text is a better option.</li>
  <li>Solve queries regarding dress code and conduct</li>
  <li>Prepare for your own placement and get rejected</li>
  <li>Reach the venue as SPOCs wont reach on time.</li>
  <li>Get the internet working</li>
  <li>Serve water and tell them where tea is.</li>
  <li>Be a pseudo SPOC for multiple companies till SPOCs turn up</li>
  <li>Get print outs from control room to stick, if its open. If not, get it opened</li>
  <li>Distribute kits from HRs</li>
  <li>After 2 days, people give up. Encourage them to take it more positively</li>
  <li>Push HRs to do the following:
    <ul>
      <li>Allow Walkins</li>
      <li>Take more people</li>
      <li>Give waitlist of atleast 3 people</li>
    </ul>
  </li>
  <li>Ask students to not screw up for their friends</li>
  <li>Sit for your own placement</li>
  <li>Convert any last minute companies</li>
  <li>Prevent Job loss</li>
  <li>Serve or Ask for lunch</li>
  <li>Share results with students on Whatsapp/email/phone/placementblog</li>
  <li>co-ordinate with HRs:
    <ul>
      <li>to dole out offers</li>
      <li>upgrade waitlist</li>
      <li>send them student details repeatedly</li>
    </ul>
  </li>
  <li>Prepare lists for phase 2</li>
  <li>Make all video/audio interview happen if outside placement session</li>
  <li>Maybe get blamed if students do not perform well in DRS/P3. Counting that as occupational hazard.</li>
  <li>Phase 2 ?</li>
</ol>

<h2 id="suggestions-for-next-year">Suggestions for next year</h2>

<ol>
  <li>Unification of BDes and MDes placements</li>
  <li>A CC from IDC + 2-3 DPC. One IC from each should ideally carry on.</li>
  <li>Better communication with “legacy” companies</li>
  <li>Process should start early. Team join by April end and Work start by July 1st week</li>
  <li>Placement phase depends on BDes exchange timing.</li>
  <li>Best is to intimate companies before Nov about dates and have it ideally before 2nd week of Feb to avoid clashes with M.Des P3 Process</li>
  <li>Better division of work among all stakeholders- IDC DPCs, PMs, APCs and CCs</li>
  <li>A small training session for IDCians would be great. It should teach some niceties of interviewing and how not to be gullible.</li>
  <li>Japanese companies may be interested if, on-boarded early on</li>
  <li>An improved slotting should be possible to avoid job loss</li>
  <li>A placement team meet to introduce IDC DPCs/CC the process and people to contact as they usually end up bugging the PMs.</li>
  <li>Placement Session that educates students about the process and things to say and not to say.</li>
  <li>A category in type of companies as <em>Design</em> along with RnD/FMCG etc.</li>
  <li>SPOCs should report on time and send a greeting message whenever they are alloted the company.</li>
  <li>Automation of a lot of tasks like printing etc can be done from the portal.</li>
  <li>A separate section on the JAF filling portal for Design as usually companies complain that they cannot find the MDes or what to choose.</li>
  <li>Consider a paid placement for companies and free/reduced fee for students.</li>
  <li>Scrap the idea of two phase placements. They do not work as students loose interest, have too much work, DPCs academics get affected and may be scolded and rebuked by authorities.</li>
  <li>Smoothen the JAF verification process. It takes a lot of time to get JAFs verified.</li>
</ol>

<p>Best,</p>

<p>Rohit</p>
<a href="/2017/12/01/BeingDPC/" style="text-align:right;">Read more&nbsp;<i class="fa fa-arrow-circle-right"></i></a>
<br>
<hr>
  </divr
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/09/10/DataViz/">
        Visualizing the Indian Railways in 3D
      </a>
    </h1>

    <span class="post-date">10 Sep 2017</span>

    <blockquote>
  <p>This post describes the concept, process, insights and extensions of a geovisualization project done as a part of Interactive Data Viz course at IDC.</p>
</blockquote>

<p>In the end, I had this 3D visualization.</p>

<p><img src="https://i.imgur.com/5nMTnGP.png" title="source: imgur.com" /></p>

<h2 id="concepts">Concept(s)</h2>
<p>The concept was to visualize the trains that originate from every station on the Indian Railways network. This would allow users to compare the number and even draw conclusions based on their locations. The goal was to be able to make the viz insightful and must atleast follow William Cleveland’s Three Visual Operations i.e Detection, Assembly and Estimation. These were covered during the course. One can also look at this <a href="https://www.slideshare.net/JohnRauser/how-humans-see-data">presentation</a> by <a href="https://www.linkedin.com/in/jrauser/">John Rauser</a>. He covers very interesting aspects about perception of data. Cleveland’s model was mentioned on slide 115 of his presentation. I thought if i could make 3d bars at the location of the stations, such that the height would represent the number of source trains.</p>

<p>In short for the visualization these would be the parameters(based on description tags by Isabel Meirelles in <a href="http://isabelmeirelles.com/book-design-for-information/">Design for information</a>):</p>

<ul>
  <li><strong>COUNTRY</strong> India</li>
  <li><strong>MEDIUM</strong> Online Interactive application</li>
  <li><strong>DOMAIN</strong> Transportation</li>
  <li><strong>TASK</strong> To provide comparison of trains starting from stations</li>
  <li><strong>STRUCTURE</strong> 3D extrusions on station location representing number of trains originating</li>
</ul>

<p>I also thought if we could make a ‘coarse’ contour map that ‘encodes’ the ease of reaching a place. This would be based on an index derived from number of trains passing, stoppage time and time of the day of a particular station. The contour would be drawn inverted such that if a place has less trains passing, its height will be higher as it is difficult to reach. This, I feel, would give some physical property to the contour too. Imagine someone sitting on the ground and it is super difficult to reach a station say <strong>A</strong> as only 1 train passes while its easy to go to say <strong>B</strong> because 10 trains pass by. So, ‘A’ will be shown higher than ‘B’. An icing could be exploring it in VR. I could not figure out the tools to implement this in the short time we had.</p>

<h2 id="process">Process</h2>
<p>The process involved:</p>

<ul>
  <li>Sourcing and cleaning data</li>
  <li>Deriving useful data</li>
  <li>Converting that data into geojson</li>
  <li>Presentation on a map</li>
</ul>

<p>The weapons of choice were : R, Python, Mapbox and Google Sheets</p>

<p><strong>Sourcing and cleaning data</strong>
The data was provided by <a href="https://data.gov.in/catalog/indian-railways-train-time-table-0">data.gov.in</a>. The format used was csv.
I used this <a href="https://rstudio-pubs-static.s3.amazonaws.com/105630_ac3d5832cb8c4c98bbc7f85d84de4ec9.html">source</a> of R codes for reference.</p>

<p><strong>Deriving useful data</strong></p>

<p>First I read the data in R using R Studio.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span><span class="w">
</span><span class="n">timetable</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"C:/Users/my pc/Downloads/isl_wise_train_detail_03082015_v1.csv"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>Next,I made a subset of trains. Hence, I could capture trains that have reached destination.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">timetable.srs.dest</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">timetable</span><span class="p">,</span><span class="w"> </span><span class="n">timetable</span><span class="o">$</span><span class="n">`station Code`</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">timetable</span><span class="o">$</span><span class="n">`Destination station Code`</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>using <code class="language-plaintext highlighter-rouge">dplyr</code>  library, I grouped and summarized data. Then I wrote the file out as a CSV.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">traingp</span><span class="o">&lt;-</span><span class="n">group_by</span><span class="p">(</span><span class="n">timetable.srs.dest</span><span class="p">,</span><span class="n">`source Station Name`</span><span class="p">)</span><span class="w">
</span><span class="n">trainsfromStation</span><span class="o">&lt;-</span><span class="n">summarise</span><span class="p">(</span><span class="n">traingp</span><span class="p">,</span><span class="n">count</span><span class="o">=</span><span class="n">n</span><span class="p">())</span><span class="w">
</span><span class="n">trainsfromStation</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainsfromStation</span><span class="p">,</span><span class="n">desc</span><span class="p">(</span><span class="n">count</span><span class="p">))</span><span class="w">
</span><span class="n">write.csv</span><span class="p">(</span><span class="n">trainsfromStation</span><span class="p">,</span><span class="s2">"NumbOfTrainsoriginating.csv"</span><span class="p">)</span><span class="w">

</span></code></pre></div></div>
<p><a href="https://imgur.com/SI78wWt"><img src="https://i.imgur.com/SI78wWt.png" title="source: imgur.com" /></a></p>

<p>I also did some other exploratory analysis like, trains passing per station.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">trainflux</span><span class="o">&lt;-</span><span class="n">group_by</span><span class="p">(</span><span class="n">timetable</span><span class="p">,</span><span class="n">`Station Name`</span><span class="p">)</span><span class="w">
</span><span class="n">trainflux</span><span class="w">
</span><span class="n">trainfluxCount</span><span class="o">&lt;-</span><span class="n">summarise</span><span class="p">(</span><span class="n">trainflux</span><span class="p">,</span><span class="n">count</span><span class="o">=</span><span class="n">n</span><span class="p">())</span><span class="w">
</span><span class="n">trainfluxCount</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainfluxCount</span><span class="p">,</span><span class="n">desc</span><span class="p">(</span><span class="n">count</span><span class="p">))</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainfluxCount</span><span class="p">,</span><span class="n">count</span><span class="p">)</span><span class="w">
</span><span class="n">write.csv</span><span class="p">(</span><span class="n">trainfluxCount</span><span class="p">,</span><span class="s2">"trainsstoppingperstation.csv"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><a href="https://imgur.com/D6cfV6H"><img src="https://i.imgur.com/D6cfV6H.png" title="source: imgur.com" /></a></p>

<p>Halt times and Average halt times per station too. This would make give an idea of how busy a station is. This was not trivial as it seems, thanks to my n00by R skills. First, all source and destination stations were removed using <code class="language-plaintext highlighter-rouge">Distance !=0</code>. Then because of the funny way times were mentioned, I had to remove ‘single’ quotes in all time vectors. I used <code class="language-plaintext highlighter-rouge">gsub</code> for that. Then, I had to convert the char to POSIXlt date format. This would enable time computation using <code class="language-plaintext highlighter-rouge">difftime</code>. Using difftime I made a new vector for HaltTime with a minute resolution. I am told, these steps are just a few clicks in excel.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">trainNoSource</span><span class="o">=</span><span class="n">subset</span><span class="p">(</span><span class="n">timetable</span><span class="p">,</span><span class="n">dataset</span><span class="o">$</span><span class="n">Distance</span><span class="o">!=</span><span class="m">0</span><span class="p">)</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Arrival time`</span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"'"</span><span class="p">,</span><span class="s1">''</span><span class="p">,</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Arrival time`</span><span class="p">)</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Departure time`</span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"'"</span><span class="p">,</span><span class="s1">''</span><span class="p">,</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Departure time`</span><span class="p">)</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Arrival time`</span><span class="o">&lt;-</span><span class="n">strptime</span><span class="p">(</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Arrival time`</span><span class="p">,</span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="s2">"%H:%M:%S"</span><span class="p">))</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Departure time`</span><span class="o">&lt;-</span><span class="n">strptime</span><span class="p">(</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Departure time`</span><span class="p">,</span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="s2">"%H:%M:%S"</span><span class="p">))</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Halt Time`</span><span class="o">&lt;-</span><span class="n">as.difftime</span><span class="p">(</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Departure time`</span><span class="o">-</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Arrival time`</span><span class="p">,</span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"%H:%M:%S"</span><span class="p">,</span><span class="n">units</span><span class="o">=</span><span class="s2">"mins"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>Next, I removed trains that had halt times less than 0 and grouped them by stations. I removed Arrival and Departure vectors. I then studied the average halt times.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">trainNoSource</span><span class="o">=</span><span class="n">subset</span><span class="p">(</span><span class="n">trainNoSource</span><span class="p">,</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Halt Time`</span><span class="o">&gt;=</span><span class="m">0</span><span class="p">)</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Arrival time`</span><span class="o">&lt;-</span><span class="kc">NULL</span><span class="w">
</span><span class="n">trainNoSource</span><span class="o">$</span><span class="n">`Departure time`</span><span class="o">&lt;-</span><span class="kc">NULL</span><span class="w">
</span><span class="n">trainNoSource_grpstation</span><span class="o">&lt;-</span><span class="n">group_by</span><span class="p">(</span><span class="n">trainNoSource</span><span class="p">,</span><span class="n">`Station Name`</span><span class="p">)</span><span class="w">
</span><span class="n">trainNoSource_haltTimes</span><span class="o">&lt;-</span><span class="n">summarise</span><span class="p">(</span><span class="n">trainNoSource_grpstation</span><span class="p">,</span><span class="n">count</span><span class="o">=</span><span class="n">n</span><span class="p">(),</span><span class="n">totalhalt</span><span class="o">=</span><span class="nf">sum</span><span class="p">(</span><span class="n">trainNoSource_grpstation</span><span class="o">$</span><span class="n">`Halt Time`</span><span class="p">))</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainNoSource_haltTimes</span><span class="p">,</span><span class="n">desc</span><span class="p">(</span><span class="n">count</span><span class="p">))</span><span class="w">
</span><span class="n">trainNoSource_haltTimes</span><span class="o">&lt;-</span><span class="n">summarise</span><span class="p">(</span><span class="n">trainNoSource_grpstation</span><span class="p">,</span><span class="n">count</span><span class="o">=</span><span class="n">n</span><span class="p">(),</span><span class="n">totalhalt</span><span class="o">=</span><span class="nf">sum</span><span class="p">(</span><span class="n">`Halt Time`</span><span class="p">))</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainNoSource_haltTimes</span><span class="p">,</span><span class="n">desc</span><span class="p">(</span><span class="n">count</span><span class="p">))</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainNoSource_haltTimes</span><span class="p">,</span><span class="n">desc</span><span class="p">(</span><span class="n">totalhalt</span><span class="p">))</span><span class="w">
</span><span class="n">trainNoSource_haltTimes</span><span class="o">$</span><span class="n">`avgstop`</span><span class="o">&lt;-</span><span class="n">trainNoSource_haltTimes</span><span class="o">$</span><span class="n">totalhalt</span><span class="o">/</span><span class="n">trainNoSource_haltTimes</span><span class="o">$</span><span class="s1">'count'</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">trainNoSource_haltTimes</span><span class="p">,</span><span class="n">desc</span><span class="p">(</span><span class="n">avgstop</span><span class="p">))</span><span class="w">
</span><span class="n">write.csv</span><span class="p">(</span><span class="n">trainNoSource_haltTimes</span><span class="p">,</span><span class="s2">"avgHaltTimeperstation.csv"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p><a href="https://imgur.com/D6cfV6H"><img src="https://i.imgur.com/D6cfV6H.png" title="source: imgur.com" /></a></p>

<p><strong>Converting that data into geojson</strong></p>

<p>The csv file was uploaded on google sheets. I used the <a href="https://chrome.google.com/webstore/detail/geocode-by-awesome-table/cnhboknahecjdnlkjnlodacdjelippfg?hl=en">awesome tables</a> google sheets plugin to convert station codes to lat and long values.</p>

<p>Unfortunately there is very little documentation for extrusion using mapbox. Just <a href="https://www.mapbox.com/mapbox-gl-js/example/3d-extrusion-floorplan/">an example</a>, which took me quite some time to get to work. From the example <a href="https://www.mapbox.com/mapbox-gl-js/assets/data/indoor-3d-map.geojson">geojson</a>, it seems a <code class="language-plaintext highlighter-rouge">height</code>, <code class="language-plaintext highlighter-rouge">base height</code> and <code class="language-plaintext highlighter-rouge">color</code> properties are required. I wanted less complications, so i went with a single color. I structured the the <a href="https://docs.google.com/spreadsheets/d/11PcWeaLH1PImgipF80lmdjKiA19Tn-BFoyatt3i5hMg/edit?usp=sharing">google sheet</a> file as below.</p>

<p><a href="https://imgur.com/wR2tvOi"><img src="https://i.imgur.com/wR2tvOi.png" title="source: imgur.com" /></a></p>

<p>Then, I used <a href="http://geojson.io">geojson.io</a> to convert the csv to a geojson file. One can also use the <a href="https://www.mapbox.com/studio/">mapbox studio</a> for the same.</p>

<p>This might seem enough, but</p>

<blockquote>
  <p>Little did i know</p>
</blockquote>

<p>The extrusion property can be applied only on polygons. How to convert a point to a polygon? This might not be the most relevant question to ask at 3:45 am in the morning. But unfortunately, it was ! <code class="language-plaintext highlighter-rouge">Python</code> to the rescue. Thanks to some <a href="https://s3-us-west-2.amazonaws.com/rohitgupta/main.html">previous work</a> .</p>

<p>In times when, ‘I wrote a script’ has become as common as ‘I took a bath’, I wrote a script.</p>

<p>The script would <code class="language-plaintext highlighter-rouge">simply</code> take the points and convert it into a square of a fixed size. The <a href="https://tools.ietf.org/html/rfc7946#section-3.1.6">geoJSON spec sheet</a> was helpful. The process was take the point as the center of the square and them compute the corners in a cyclic manner.</p>

<p><strong>Presentation on a map</strong></p>

<p>By 6am, I had all polygons on the map in mapbox studio. To extrude the height, I had multiplied the train number by 7000 as it seemed to make a lot of effect on Visual detection and helped estimation. I later used the mapbox example and modified it to add tooltips too.</p>

<p>The result is hosted <a href="http://rohitg.in/DataViz/index.html">here</a>. The project is in this <a href="https://github.com/IndianTinker/DataViz">repo</a>. Feel free to correct me if I am wrong.</p>

<h2 id="insights">Insights</h2>
<p>Some insights we had during our class discussion were:</p>

<ul>
  <li>Vadodra has just one train originating but 298 passing through it
<a href="https://imgur.com/ltiPG0t"><img src="https://i.imgur.com/ltiPG0t.png" title="source: imgur.com" /></a></li>
  <li>There are ‘international’ trains originating from Dhaka
<a href="https://imgur.com/rhdnM7z"><img src="https://i.imgur.com/rhdnM7z.png" title="source: imgur.com" /></a></li>
  <li>Howrah has the most trains starting
<a href="https://imgur.com/fVqVIft"><img src="https://i.imgur.com/fVqVIft.png" title="source: imgur.com" /></a></li>
  <li>Trains move from outside to inside as more trains originate at boundaries.
<a href="https://imgur.com/u6F0xPr"><img src="https://i.imgur.com/u6F0xPr.png" title="source: imgur.com" /></a></li>
</ul>

<h2 id="extensions">Extensions</h2>
<ul>
  <li>Employ redundancy using color channel to allow users know what range of trains originate. A color for say 1-10, 10-20 etc .</li>
  <li>Add another layer of passing by trains</li>
  <li>See if insights could be found if trains could be visualized with population.</li>
</ul>

<p>Hope this helps !</p>

<p>Cheers,</p>

<p>Rohit</p>
<a href="/2017/09/10/DataViz/" style="text-align:right;">Read more&nbsp;<i class="fa fa-arrow-circle-right"></i></a>
<br>
<hr>
  </divr
  
</div>
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page9">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page7">Newer</a>
    
  
</div>

    </div>


  </body>
</html>
